# ===========================================
# Для DOCKER: скопируйте в .env в КОРНЕ проекта,
# запуск одной командой: docker compose up -d --build
#
# Для ЛОКАЛЬНОЙ разработки используйте services/api/.env
# (см. README.md)
# ===========================================

# --- База данных ---
# В docker-compose.yml API работает в network_mode: host.
# Если на хосте порт 5432 на 127.0.0.1 занят docker-proxy другого контейнера,
# укажите IP docker0 (обычно 172.17.0.1) — это не открывает Postgres наружу.
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/showcase

# --- JWT для админки ---
JWT_SECRET=your-super-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60

# --- Админ (логин/пароль для MVP) ---
ADMIN_LOGIN=admin
ADMIN_PASSWORD=admin
ADMIN_PASSWORD_HASH=  # bcrypt hash, см. docs/user-guide.md

# --- Telegram Bot (для initData validation, опционально) ---
TELEGRAM_BOT_TOKEN=
CONTACT_TELEGRAM_LINK=https://t.me/your_support_bot

# --- Порты ---
# WEB_PORT: порт nginx (витрина + админка). Например 8089, если 80 занят.
WEB_PORT=80
# API_PORT не нужен, т.к. API в host network слушает 8000 (см. infra/Dockerfile.api)

# --- Хранилище файлов ---
STORAGE_PATH=./storage
STORAGE_MAX_FILE_SIZE_MB=50
STORAGE_ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
STORAGE_ALLOWED_ATTACHMENT_TYPES=application/pdf,application/zip,application/x-rar-compressed

# --- CORS (URL админки и Mini App) ---
CORS_ORIGINS=http://localhost:5173,http://localhost:5174,https://your-domain.com

# --- Логирование ---
LOG_LEVEL=INFO
LOG_MAX_BYTES_MB=100

# --- Frontend (build-time для Dockerfile.web) ---
# Для продакшена должно быть /api, чтобы запросы шли в nginx reverse-proxy на том же домене.
VITE_API_URL=/api
VITE_CONTACT_TELEGRAM_LINK=https://t.me/your_support_bot
