# Чеклист предпродакшн-проверок

## Перед выкладкой выполнить

### 1. Уязвимости зависимостей
```bash
# Python (API)
cd services/api && pip-audit

# Node (Mini App, Admin)
cd apps/miniapp-web && npm audit
cd apps/admin-web && npm audit
```

### 2. SQL Injection
- Все запросы — через SQLAlchemy ORM (параметризованные запросы)
- Запрещён raw SQL без экранирования

### 3. Утечки памяти
- Ограничение размера загрузок: 50 МБ (`MAX_FILE_MB`)
- Нагрузочное тестирование: проверить рост RSS под нагрузкой

### 4. Секреты
- Только в `.env`
- Перед коммитом: `git diff` — убедиться, что секреты не попали в документацию/код

### 5. Производительность
- Пагинация списка товаров (per_page ≤ 100)
- Оптимизация картинок (при необходимости — thumb)

### 6. Логирование
- Ротация: общий объём ≤ 100 МБ (3 файла по ~33 МБ)
- Уровни: DEBUG (dev), INFO (prod)

### 7. Безопасность админки
- Rate-limit на логин: 5 попыток/минуту
- JWT с истечением срока
- В продакшене: `ADMIN_PASSWORD_HASH` (bcrypt), не `ADMIN_PASSWORD`
